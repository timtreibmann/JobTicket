<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
	<h:form>
		<p:breadCrumb>
			<p:menuitem value="Übersicht"
				url="http://localhost:8080/JobTicket/faces/start.xhtml" />
			<p:menuitem value="Jobticket"
				url="http://localhost:8080/JobTicket/faces/jobticket_main.xhtml" />

		</p:breadCrumb>

		<h:panelGrid columns="3">
			<p:panel id="panel1">
				<p:button outcome="start.xhtml" value="Zurück" />
				<p:commandButton action="#{jobticketBean.saveJobticket}"
					ajax="false" value="Weiter">
				</p:commandButton>
				<p:messages id="messages" />
				<h:panelGrid columns="2">
					<h:panelGrid columns="2">
						<p:outputLabel for="jobnummer" value="Jobnummer" />
						<p:outputLabel
							value="#{jobticketBean.job.id==0 ? 'wird generiert' : jobticketBean.job.id}"
							id="jobnummer" />
						<p:outputLabel for="kundenname" value="Kundenname: " />
						<p:selectOneMenu style="width:100%" id="kundenname"
							value="#{jobticketBean.selectedKundeId}" effect="fold"
							required="true">
							<f:selectItems value="#{kundenBean.kunden}" var="kunde"
								itemLabel="#{kunde.name}" itemValue="#{kunde.id}" />

							<p:ajax event="change" update="@form"
								listener="#{jobticketBean.updateKuerzel}" />
						</p:selectOneMenu>


						<p:outputLabel for="job" value="Jobname" />
						<p:inputText id="job" value="#{jobticketBean.job.name}"
							required="true" />



						<p:outputLabel for="budget_in_eur" value="Budget in Euro" />
						<p:inputText value="#{jobticketBean.job.budgetInEuro}"
							id="budget_in_eur"></p:inputText>

						<p:outputLabel for="budget_in_std" value="Budget in Stunden" />
						<p:inputText value="#{jobticketBean.job.budgetInStd}"
							id="budget_in_std"></p:inputText>
					</h:panelGrid>
					<h:panelGrid columns="2">
						<p:outputLabel for="alt" value="Alte Jobnummer" />
						<p:inputText value="#{jobticketBean.job.alteJobnummer}" id="alt"
							required="false" />

						<p:outputLabel for="kundenkurz" value="Kundenkürzel" />
						<h:panelGrid columns="5">

							<p:inputText value="#{jobticketBean.kuerzel}" id="kundenkurz"
								required="false">
							</p:inputText>

							<p:tooltip for="find" value="Suche Kunden mit Kundenkürzel"></p:tooltip>
							<p:commandButton id="find" icon="ui-icon-search"
								update="kundenname"
								actionListener="#{jobticketBean.findKundeByKuerzel}"></p:commandButton>
							<p:tooltip for="neuerKundeButton"
								value="Einen neuen Kunden in der Datenbank anlegen"></p:tooltip>
							<p:button id="neuerKundeButton" icon="ui-icon-plus"
								outcome="kunden_add.xhtml" type="button" title="neuer Kunde">
								<f:param name="neuer Kunde" />
							</p:button>
						</h:panelGrid>

						<p:outputLabel for="jobbeschreibung" value="Beschreibung" />
						<p:inputTextarea maxlength="200"
							value="#{jobticketBean.job.jobbeschreibung}" id="jobbeschreibung"></p:inputTextarea>



					</h:panelGrid>
				</h:panelGrid>
			</p:panel>

		</h:panelGrid>



	</h:form>
</h:body>
</html>